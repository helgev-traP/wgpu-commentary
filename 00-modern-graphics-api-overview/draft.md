# 現代グラフィックAPI概説

- GPUの動かし方
  - GPUはCPUからコマンドを送って動かす
  - リソースをアップロードして、コマンドを送る
- レンダリングの格段で行われていること、プログラマの仕事とGPUの仕事
  - 頂点の作成、テクスチャ貼り
  - ポリゴンの作成、インデックス作成
  - 頂点シェーダー
    - 座標変換
      - モデル座標
      - ワールド座標
      - カメラ座標
      - クリップ座標
    - フラグメントシェーダーに渡すデータの作成
  - ポリゴンからフラグメントの生成
    - ここで頂点シェーダーで作成したデータの線形補間が行われる
  - 深度テスト・シザーテスト・ステンシルテスト
  - フラグメントシェーダー
    - 頂点シェーダーで作成したデータをもとにテクスチャをサンプリングしたりして、フラグメントの色出力を決定する。
  - テストを通過したフラグメントのシェーダー出力値をテクスチャの該当位置の値にブレンド
- グラフィックパイプラインのCPU側の操作
  - リソース準備
    - レンダリング先のテクスチャ用意
    - 頂点の用意
    - テクスチャ(画像)の用意
    - サンプラーの用意
    - その他データの用意
  - リソースをGPUにアップロード
    - 頂点バッファのアップロード
    - インデックスバッファのアップロード
    - テクスチャのアップロード
    - サンプラーの設定
    - データのアップロード
  - リソースのバインドグループを作成
  - リソースのバインドグループの設定をもとにレンダーパイプラインを作成
  - コマンドエンコーダーを取得
  - コマンドエンコーダーから、テクスチャに対してレンダーパスを作成
  - レンダーパスにレンダーパイプラインを割り当て
  - レンダーパスにリソースを割り当て
  - レンダーパスに頂点バッファとインデックスバッファを割り当て
  - 描画コール
  - コマンドの発行
